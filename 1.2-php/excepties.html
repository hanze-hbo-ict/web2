
<!DOCTYPE html>


<html lang="nl" data-content_root="../" >

  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="viewport" content="width=device-width, initial-scale=1" />

    <title>Foutafhandeling &#8212; Webtechnologie II</title>
  
  
  
  <script data-cfasync="false">
    document.documentElement.dataset.mode = localStorage.getItem("mode") || "";
    document.documentElement.dataset.theme = localStorage.getItem("theme") || "";
  </script>
  <!-- 
    this give us a css class that will be invisible only if js is disabled 
  -->
  <noscript>
    <style>
      .pst-js-only { display: none !important; }

    </style>
  </noscript>
  
  <!-- Loaded before other Sphinx assets -->
  <link href="../_static/styles/theme.css?digest=26a4bc78f4c0ddb94549" rel="stylesheet" />
<link href="../_static/styles/pydata-sphinx-theme.css?digest=26a4bc78f4c0ddb94549" rel="stylesheet" />

    <link rel="stylesheet" type="text/css" href="../_static/pygments.css?v=fa44fd50" />
    <link rel="stylesheet" type="text/css" href="../_static/styles/sphinx-book-theme.css?v=384b581d" />
    <link rel="stylesheet" type="text/css" href="../_static/togglebutton.css?v=13237357" />
    <link rel="stylesheet" type="text/css" href="../_static/copybutton.css?v=949a1ff5" />
    <link rel="stylesheet" type="text/css" href="../_static/mystnb.4510f1fc1dee50b3e5859aac5469c37c29e427902b24a333a5f9fcb2f0b3ac41.css" />
    <link rel="stylesheet" type="text/css" href="../_static/sphinx-thebe.css?v=4fa983c6" />
    <link rel="stylesheet" type="text/css" href="../_static/sphinx-design.min.css?v=95c83b7e" />
    <link rel="stylesheet" type="text/css" href="../_static/custom.css?v=94e65080" />
  
  <!-- So that users can add custom icons -->
  <script src="../_static/scripts/fontawesome.js?digest=26a4bc78f4c0ddb94549"></script>
  <!-- Pre-loaded scripts that we'll load fully later -->
  <link rel="preload" as="script" href="../_static/scripts/bootstrap.js?digest=26a4bc78f4c0ddb94549" />
<link rel="preload" as="script" href="../_static/scripts/pydata-sphinx-theme.js?digest=26a4bc78f4c0ddb94549" />

    <script src="../_static/documentation_options.js?v=b028fc25"></script>
    <script src="../_static/doctools.js?v=9a2dae69"></script>
    <script src="../_static/sphinx_highlight.js?v=dc90522c"></script>
    <script src="../_static/clipboard.min.js?v=a7894cd8"></script>
    <script src="../_static/copybutton.js?v=ff8fa330"></script>
    <script src="../_static/scripts/sphinx-book-theme.js?v=efea14e4"></script>
    <script>let toggleHintShow = 'Click to show';</script>
    <script>let toggleHintHide = 'Click to hide';</script>
    <script>let toggleOpenOnPrint = 'true';</script>
    <script src="../_static/togglebutton.js?v=4a39c7ea"></script>
    <script src="../_static/translations.js?v=5ce3cdba"></script>
    <script>var togglebuttonSelector = '.toggle, .admonition.dropdown';</script>
    <script src="../_static/design-tabs.js?v=f930bc37"></script>
    <script>const THEBE_JS_URL = "https://unpkg.com/thebe@0.8.2/lib/index.js"; const thebe_selector = ".thebe,.cell"; const thebe_selector_input = "pre"; const thebe_selector_output = ".output, .cell_output"</script>
    <script async="async" src="../_static/sphinx-thebe.js?v=c100c467"></script>
    <script>var togglebuttonSelector = '.toggle, .admonition.dropdown';</script>
    <script>const THEBE_JS_URL = "https://unpkg.com/thebe@0.8.2/lib/index.js"; const thebe_selector = ".thebe,.cell"; const thebe_selector_input = "pre"; const thebe_selector_output = ".output, .cell_output"</script>
    <script>DOCUMENTATION_OPTIONS.pagename = '1.2-php/excepties';</script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Zoeken" href="../search.html" />
    <link rel="next" title="Oefening" href="oefening.html" />
    <link rel="prev" title="Object-georiënteerd programmeren" href="oop.html" />
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <meta name="docsearch:language" content="nl"/>
  <meta name="docsearch:version" content="" />
  </head>
  
  
  <body data-bs-spy="scroll" data-bs-target=".bd-toc-nav" data-offset="180" data-bs-root-margin="0px 0px -60%" data-default-mode="">

  
  
  <div id="pst-skip-link" class="skip-link d-print-none"><a href="#main-content">Skip to main content</a></div>
  
  <div id="pst-scroll-pixel-helper"></div>
  
  <button type="button" class="btn rounded-pill" id="pst-back-to-top">
    <i class="fa-solid fa-arrow-up"></i>Back to top</button>

  
  <dialog id="pst-search-dialog">
    
<form class="bd-search d-flex align-items-center"
      action="../search.html"
      method="get">
  <i class="fa-solid fa-magnifying-glass"></i>
  <input type="search"
         class="form-control"
         name="q"
         placeholder="Search this book..."
         aria-label="Search this book..."
         autocomplete="off"
         autocorrect="off"
         autocapitalize="off"
         spellcheck="false"/>
  <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd>K</kbd></span>
</form>
  </dialog>

  <div class="pst-async-banner-revealer d-none">
  <aside id="bd-header-version-warning" class="d-none d-print-none" aria-label="Version warning"></aside>
</div>

  
    <header class="bd-header navbar navbar-expand-lg bd-navbar d-print-none">
    </header>
  

  <div class="bd-container">
    <div class="bd-container__inner bd-page-width">
      
      
      
      <dialog id="pst-primary-sidebar-modal"></dialog>
      <div id="pst-primary-sidebar" class="bd-sidebar-primary bd-sidebar">
        

  
  <div class="sidebar-header-items sidebar-primary__section">
    
    
    
    
  </div>
  
    <div class="sidebar-primary-items__start sidebar-primary__section">
        <div class="sidebar-primary-item">

  
    
  

<a class="navbar-brand logo" href="../about/syllabus.html">
  
  
  
  
  
    
    
      
    
    
    <img src="../_static/logo-hanze.png" class="logo__image only-light" alt="Webtechnologie II - Home"/>
    <img src="../_static/logo-hanze.png" class="logo__image only-dark pst-js-only" alt="Webtechnologie II - Home"/>
  
  
</a></div>
        <div class="sidebar-primary-item">

<button class="btn search-button-field search-button__button pst-js-only" title="Zoeken" aria-label="Zoeken" data-bs-placement="bottom" data-bs-toggle="tooltip">
 <i class="fa-solid fa-magnifying-glass"></i>
 <span class="search-button__default-text">Zoeken</span>
 <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd class="kbd-shortcut__modifier">K</kbd></span>
</button></div>
        <div class="sidebar-primary-item"><nav class="bd-links bd-docs-nav" aria-label="Main">
    <div class="bd-toc-item navbar-nav active">
        
        <ul class="nav bd-sidenav bd-sidenav__home-link">
            <li class="toctree-l1">
                <a class="reference internal" href="../about/syllabus.html">
                    Webtechnologie 2
                </a>
            </li>
        </ul>
        <p aria-level="2" class="caption" role="heading"><span class="caption-text">Over deze cursus</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="../about/literatuur.html">Literatuur</a></li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">1.1 PHP</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="../1.1-php/intro.html">Intro</a></li>



<li class="toctree-l1"><a class="reference internal" href="../1.1-php/installeren.html">PHP installeren</a></li>

<li class="toctree-l1"><a class="reference internal" href="../1.1-php/opgave.html">Opgave</a></li>



</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">1.2 PHP</span></p>
<ul class="current nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="functies.html">Functies</a></li>
<li class="toctree-l1"><a class="reference internal" href="oop.html">Object-georiënteerd programmeren</a></li>
<li class="toctree-l1 current active"><a class="current reference internal" href="#">Foutafhandeling</a></li>

<li class="toctree-l1"><a class="reference internal" href="oefening.html">Oefening</a></li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">2.1 HTML en CSS</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="../2.1-html/intro.html">2.1 HTML: Introductie</a></li>
<li class="toctree-l1"><a class="reference internal" href="../2.1-html/opgave.html">2.1 HTML: Opgaven</a></li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">2.2 Kernel</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="../2.2-kernel/http.html">HTTP</a></li>
<li class="toctree-l1"><a class="reference internal" href="../2.2-kernel/kernel.html">Kernel</a></li>
<li class="toctree-l1"><a class="reference internal" href="../2.2-kernel/autoloader.html">Autoloader</a></li>
<li class="toctree-l1"><a class="reference internal" href="../2.2-kernel/composer.html">Composer</a></li>
<li class="toctree-l1"><a class="reference internal" href="../2.2-kernel/oefening.html">Oefeningen</a></li>
<li class="toctree-l1"><a class="reference internal" href="../2.2-kernel/opdracht.html">Opdracht</a></li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">3.1 Request</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="../3.1-request/intro.html">Intro</a></li>
<li class="toctree-l1"><a class="reference internal" href="../3.1-request/opgave.html">Opgave</a></li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">3.2 Response</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="../3.2-response/intro.html">Intro</a></li>
<li class="toctree-l1"><a class="reference internal" href="../3.2-response/opgave.html">Opgave</a></li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">4.1 Templating</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="../4.1-templating/intro.html">Intro</a></li>
<li class="toctree-l1"><a class="reference internal" href="../4.1-templating/opgave.html">Opgave</a></li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">4.2 Routing</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="../4.2-routing/frontcontroller.html">De front controller</a></li>
<li class="toctree-l1"><a class="reference internal" href="../4.2-routing/router.html">De router</a></li>
<li class="toctree-l1"><a class="reference internal" href="../4.2-routing/callable.html">Verwijzingen naar functies</a></li>
<li class="toctree-l1"><a class="reference internal" href="../4.2-routing/regex.html">Reguliere expressies</a></li>
<li class="toctree-l1"><a class="reference internal" href="../4.2-routing/oefening.html">Oefeningen</a></li>
<li class="toctree-l1"><a class="reference internal" href="../4.2-routing/opdracht.html">Opdracht</a></li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">5.1 Dependency injection</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="../5.1-di/intro.html">Intro</a></li>
<li class="toctree-l1"><a class="reference internal" href="../5.1-di/opgave.html">Opgave</a></li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">5.2 DI Container</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="../5.2-container/intro.html">Intro</a></li>
<li class="toctree-l1"><a class="reference internal" href="../5.2-container/opgave.html">Opgave</a></li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">6.1 Database</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="../6.1-database/intro.html">Intro</a></li>
<li class="toctree-l1"><a class="reference internal" href="../6.1-database/opgave.html">Opgave</a></li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">6.2 ORM</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="../6.2-orm/intro.html">Intro</a></li>
<li class="toctree-l1"><a class="reference internal" href="../6.2-orm/opgave.html">Opgave</a></li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">7.1 Authenticatie</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="../7.1-authenticatie/intro.html">Intro</a></li>
<li class="toctree-l1"><a class="reference internal" href="../7.1-authenticatie/opgave.html">Opgave</a></li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">7.2 Autorisatie</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="../7.2-autorisatie/intro.html">Intro</a></li>
<li class="toctree-l1"><a class="reference internal" href="../7.2-autorisatie/opgave.html">Opgave</a></li>
</ul>

    </div>
</nav></div>
    </div>
  
  
  <div class="sidebar-primary-items__end sidebar-primary__section">
  </div>
  
  <div id="rtd-footer-container"></div>


      </div>
      
      <main id="main-content" class="bd-main" role="main">
        
        

<div class="sbt-scroll-pixel-helper"></div>

          <div class="bd-content">
            <div class="bd-article-container">
              
              <div class="bd-header-article d-print-none">
<div class="header-article-items header-article__inner">
  
    <div class="header-article-items__start">
      
        <div class="header-article-item"><label class="sidebar-toggle primary-toggle btn btn-sm" for="__primary" title="Toggle primary sidebar" data-bs-placement="bottom" data-bs-toggle="tooltip">
  <span class="fa-solid fa-bars"></span>
</label></div>
      
    </div>
  
  
    <div class="header-article-items__end">
      
        <div class="header-article-item">

<div class="article-header-buttons">





<div class="dropdown dropdown-download-buttons">
  <button class="btn dropdown-toggle" type="button" data-bs-toggle="dropdown" aria-expanded="false" aria-label="Download deze pagina">
    <i class="fas fa-download"></i>
  </button>
  <ul class="dropdown-menu">
      
      
      
      <li><a href="../_sources/1.2-php/excepties.md" target="_blank"
   class="btn btn-sm btn-download-source-button dropdown-item"
   title="Download het bronbestand"
   data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-file"></i>
  </span>
<span class="btn__text-container">.md</span>
</a>
</li>
      
      
      
      
      <li>
<button onclick="window.print()"
  class="btn btn-sm btn-download-pdf-button dropdown-item"
  title="Afdrukken naar pdf"
  data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-file-pdf"></i>
  </span>
<span class="btn__text-container">.pdf</span>
</button>
</li>
      
  </ul>
</div>




<button onclick="toggleFullScreen()"
  class="btn btn-sm btn-fullscreen-button"
  title="Volledig scherm"
  data-bs-placement="bottom" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-expand"></i>
  </span>

</button>



<button class="btn btn-sm nav-link pst-navbar-icon theme-switch-button pst-js-only" aria-label="Color mode" data-bs-title="Color mode"  data-bs-placement="bottom" data-bs-toggle="tooltip">
  <i class="theme-switch fa-solid fa-sun                fa-lg" data-mode="light" title="Light"></i>
  <i class="theme-switch fa-solid fa-moon               fa-lg" data-mode="dark"  title="Dark"></i>
  <i class="theme-switch fa-solid fa-circle-half-stroke fa-lg" data-mode="auto"  title="System Settings"></i>
</button>


<button class="btn btn-sm pst-navbar-icon search-button search-button__button pst-js-only" title="Zoeken" aria-label="Zoeken" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <i class="fa-solid fa-magnifying-glass fa-lg"></i>
</button>
<label class="sidebar-toggle secondary-toggle btn btn-sm" for="__secondary"title="Toggle secondary sidebar" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <span class="fa-solid fa-list"></span>
</label>
</div></div>
      
    </div>
  
</div>
</div>
              
              

<div id="jb-print-docs-body" class="onlyprint">
    <h1>Foutafhandeling</h1>
    <!-- Table of contents -->
    <div id="print-main-content">
        <div id="jb-print-toc">
            
            <div>
                <h2> Inhoud </h2>
            </div>
            <nav aria-label="Page">
                <ul class="visible nav section-nav flex-column">
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#">Foutafhandeling</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#errors">Errors</a><ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#excepties">Excepties</a></li>
</ul>
</li>
</ul>

            </nav>
        </div>
    </div>
</div>

              
                
<div id="searchbox"></div>
                <article class="bd-article">
                  
  <section class="tex2jax_ignore mathjax_ignore" id="foutafhandeling">
<h1>Foutafhandeling<a class="headerlink" href="#foutafhandeling" title="Link to this heading">#</a></h1>
<p>PHP heeft om historische redenen drie manieren om fouten in een applicatie
te melden. In de eerste plaats gebeurt dit in sommige gevallen door een
speciale returnwaarde, meestal <code class="docutils literal notranslate"><span class="pre">false</span></code>, te geven als een functieaanroep faalt.
Zo geeft de functie
<a class="reference external" href="https://www.php.net/manual/en/function.fopen.php"><code class="docutils literal notranslate"><span class="pre">fopen</span></code></a> een file pointer
terug als het bestand geopend kon worden, en <code class="docutils literal notranslate"><span class="pre">false</span></code> als er een fout
opgetreden is. Deze stijl van foutafhandeling komt met name voor in functies
die aan C ontleend zijn, aangezien dit ook in C een gebruikelijke manier van
foutafhandeling is. Deze methode zal hier niet verder besproken worden
aangezien hier geen nieuwe taalconstructies voor nodig zijn; het is aan de
gebruiker van dergelijke functie om met een <code class="docutils literal notranslate"><span class="pre">if</span></code>-statement te controleren of
de functie geslaagd is. Merk hierbij nog op dat de conditie in de <code class="docutils literal notranslate"><span class="pre">if</span></code> normaal
gesproken gebruik zal maken van de vergelijkingsoperator <code class="docutils literal notranslate"><span class="pre">===</span></code> om te
voorkomen dat een returnwaarde van 0 of een lege string gezien wordt als een
fout.</p>
</section>
<section class="tex2jax_ignore mathjax_ignore" id="errors">
<h1>Errors<a class="headerlink" href="#errors" title="Link to this heading">#</a></h1>
<p>Een andere methode die PHP toepast is het rapporteren van
<a class="reference external" href="https://www.php.net/manual/en/language.errors.php">errors</a>,
warnings en notices. Als er een fout optreedt, zal PHP een error
rapporteren. PHP print dan een melding dat er een fout is opgetreden, en in
welke regel dat was. Dit gebeurt bijvoorbeeld als de hoeveelheid
beschikbaar geheugen wordt overschreden, maar ook als een niet-bestaand
bestand wordt geïncluded met <code class="docutils literal notranslate"><span class="pre">include_once</span></code>. In het eerste geval is er
sprake van een <em>fatal error</em> en zal de applicatie stoppen; in het tweede
geval is er sprake van een <em>warning</em> en zal PHP na het afdrukken van deze
foutmelding de applicatie verder uitvoeren. Sinds PHP 7 is het aantal
gevallen waarin PHP een error geeft significant verminderd; veel situaties
waarin eerst een error werd gegeven zullen nu een exceptie gooien, zoals
hierna nog besproken wordt. Overschrijding van het beschikbare geheugen is
echter nog wel een situatie waarin een error wordt gebruikt; hetzelfde geldt
als het PHP-bestand dat uitgevoerd wordt syntaxfouten bevat.</p>
<p>Zoals we hierboven zagen zijn niet alle gerapporteerde fouten even ernstig.
In sommige gevallen kan PHP de rest van de applicatie uitvoeren, in andere
gevallen niet. Foutmeldingen hebben ieder een eigen <em>severity</em>. Naast
enkele varianten van errors en warnings kent PHP ook <em>notices</em>, meldingen
van mogelijke fouten die als minder erg worden gezien dan warnings, en
<em>deprecationmeldingen</em>, meldingen van het gebruik van taalconstructies die
in een volgende PHP-versie verwijderd zullen worden. Sinds PHP 8 zijn de
meeste <em>notices</em> warnings geworden, dus dat niveau wordt nog maar weinig
gebruikt.</p>
<p>Al deze niveaus hebben een eigen
<a class="reference external" href="https://www.php.net/manual/en/errorfunc.constants.php">constante</a>
die gebruikt kan worden om de melding al dan niet te tonen. Dit gebeurt door
middel van de functie
<a class="reference external" href="https://www.php.net/manual/en/function.error-reporting.php"><code class="docutils literal notranslate"><span class="pre">error_reporting</span></code></a>.
Deze functie heeft als eerste parameter een getal dat aangeeft welke fouten
getoond moeten worden. Dit getal wordt opgebouwd door de bitwise OR <code class="docutils literal notranslate"><span class="pre">|</span></code> te
nemen van de relevante constanten; de constante <code class="docutils literal notranslate"><span class="pre">E_ALL</span></code> kan gebruikt worden
om alle niveaus te tonen. Zo betekent <code class="docutils literal notranslate"><span class="pre">error_reporting(0)</span></code> dat geen enkele
fout getoond moet worden, <code class="docutils literal notranslate"><span class="pre">error_reporting(E_ERROR</span> <span class="pre">|</span> <span class="pre">E_WARNING</span> <span class="pre">|</span> <span class="pre">E_PARSE)</span></code>
dat alleen deze drie niveaus getoond moeten worden en <code class="docutils literal notranslate"><span class="pre">error_reporting(E_ALL</span>&#160; <span class="pre">&amp;</span> <span class="pre">~E_NOTICE)</span></code> dat alle niveaus behalve notices getoond moeten worden; <code class="docutils literal notranslate"><span class="pre">~</span></code> is
de bitwise NOT operator en <code class="docutils literal notranslate"><span class="pre">&amp;</span></code> is bitwise AND. Ook errors die niet
gerapporteerd worden zullen de applicatie nog steeds stoppen, alleen wordt
er dan geen melding getoond. Warnings stoppen de applicatie al niet, dus
door die te onderdrukken worden ze geheel onzichtbaar.</p>
<p>Het is in een ontwikkelomgeving meestal wenselijk om fouten te tonen om het
onwikkelproces te ondersteunen, maar dit is anders op een productieomgeving.
Daar is het vaak juist niet wenselijk. In het bestand <code class="docutils literal notranslate"><span class="pre">php.ini</span></code> kan de
instelling <code class="docutils literal notranslate"><span class="pre">display_errors</span></code> op <code class="docutils literal notranslate"><span class="pre">0</span></code> worden gezet om alle foutmeldingen te
verbergen; dit kan ook in PHP zelf ingesteld worden door middel van de functie
<a class="reference external" href="https://www.php.net/manual/en/function.ini-set.php"><code class="docutils literal notranslate"><span class="pre">ini_set</span></code></a>. Onderstaand
commando zal bijvoorbeeld alle foutmeldingen verbergen.</p>
<div class="highlight-php notranslate"><div class="highlight"><pre><span></span><span class="x">ini_set(&#39;display_errors&#39;, &#39;0&#39;);</span>
</pre></div>
</div>
<p>Daarnaast is sinds PHP 8.5 de setting <code class="docutils literal notranslate"><span class="pre">fatal_error_backtraces</span></code> beschikbaar.
Deze setting, die default aan staat, zorgt ervoor dat ook bij een error een
stacktrace getoond wordt waardoor je kan zien welke functies zijn
aangeroepen. Dit kan ook uitgezet worden via <code class="docutils literal notranslate"><span class="pre">php.ini</span></code> of <code class="docutils literal notranslate"><span class="pre">ini_set</span></code>.</p>
<p>PHP biedt twee mogelijkheden om op het optreden van fouten te reageren. In
de eerste plaats kan je een functie maken die wordt aangeroepen elke keer
als er een fout optreedt. Deze functie krijgt de severity en een foutmelding
mee als parameters en moet een boolean teruggeven. Als de functie <code class="docutils literal notranslate"><span class="pre">false</span></code>
teruggeeft, wordt de standaard error handler van PHP gebruikt om de fout af
te handelen, anders niet. Om deze functie bij PHP te registreren, moet je de
functie
<a class="reference external" href="https://www.php.net/manual/en/function.set-error-handler.php"><code class="docutils literal notranslate"><span class="pre">set_error_handler</span></code></a>
aanroepen met een string met de naam van de functie als parameter, zoals in
het onderstaande voorbeeld.</p>
<div class="highlight-php notranslate"><div class="highlight"><pre><span></span><span class="x">function error_handler(int $errno, string $errstr): boolean</span>
<span class="x">{</span>
<span class="x">    throw new ErrorException($errstr, 0, $errno);</span>
<span class="x">}</span>

<span class="x">set_error_handler(&#39;error_handler&#39;);</span>
</pre></div>
</div>
<p>Merk op dat hier de nog te bespreken syntax voor het gooien van excepties
wordt gebruikt. Wat deze error handler doet, is de meeste errors die PHP
rapporteert omzetten in excepties die elders afgevangen zou kunnen worden.
Dit is een niet ongebruikelijke manier om hiermee om te gaan, zeker in PHP
versies die ouder zijn dan PHP 7. In die versie zijn immers, zoals genoemd,
de meeste fatale fouten al omgezet naar excepties. De hier genoemde code zal
ook excepties gooien voor warnings en deprecations. Dit is enigszins
aggresief; warnings dienen vermeden te worden dus dat die excepties
opleveren is redelijk, maar deprecations zouden onverwacht kunnen ontstaan
door het upgraden van de PHP-versie. Door voor dergelijke fouten geen
exceptie te gooien maar de reguliere error handling te laten uitvoeren kan
dit ondervangen worden.</p>
<p>Fatale fouten kunnen niet afgehandeld worden door de error handler kunnen
wel door een <em>shutdown function</em> worden afgehandeld, in zoverre dat gelogd zou
kunnen worden dat ze opgetreden zijn. Het is immers dan niet mogelijk om de
applicatie nog te laten werken, maar wel zou een nette foutmelding getoond
kunnen worden. Deze functie kan geregistreerd worden met
<a class="reference internal" href="#"><span class="xref myst"><code class="docutils literal notranslate"><span class="pre">register_shutdown_function</span></code></span></a>.
Een nuttige functie die in de shutdown function gebruikt kan worden is
<a class="reference external" href="https://www.php.net/manual/en/function.error-get-last.php"><code class="docutils literal notranslate"><span class="pre">error_get_last</span></code></a>,
die informatie geeft over de laatst opgetreden fout. Als dit een fatale fout
is die niet door de error handler kan worden afgehandeld, kan dit wel in de
shutdown functie, zoals in onderstaand voorbeeld.</p>
<div class="highlight-php notranslate"><div class="highlight"><pre><span></span><span class="x">function shutdown_function(): void</span>
<span class="x">{</span>
<span class="x">    $error = error_get_last();</span>
<span class="x">    if ($error !== null &amp;&amp; in_array($error[&#39;type&#39;], [E_ERROR, E_PARSE, E_CORE_ERROR, E_COMPILE_ERROR, E_USER_ERROR, E_RECOVERABLE_ERROR])) {</span>
<span class="x">        echo &quot;Fatal error: {$error[&#39;message&#39;]}\n&quot;;</span>
<span class="x">    }</span>
<span class="x">}</span>

<span class="x">register_shutdown_function(&#39;shutdown_function&#39;);</span>
</pre></div>
</div>
<section id="excepties">
<h2>Excepties<a class="headerlink" href="#excepties" title="Link to this heading">#</a></h2>
<p>Ten slotte heeft PHP sinds versie 5 de beschikking over
<a class="reference external" href="https://www.php.net/manual/en/language.exceptions.php"><em>excepties</em></a>.
Deze werken grotendeels op dezelfde manier als in Java. Een exceptie is een
object van de klasse <code class="docutils literal notranslate"><span class="pre">Throwable</span></code> of een subklasse hiervan. Excepties kunnen
gegooid worden, en als ze nergens worden gevangen zullen ze uiteindelijk de
applicatie stoppen. Excepties kunnen gegooid worden door standaardfuncties,
maar ook door de programmeur door middel van het keyword <code class="docutils literal notranslate"><span class="pre">throw</span></code>, zoals in
onderstaand voorbeeld, waarin de ingebouwde exceptieklasse <code class="docutils literal notranslate"><span class="pre">DomainException</span></code>
wordt gebruikt.</p>
<div class="highlight-php notranslate"><div class="highlight"><pre><span></span><span class="x">if ($x &lt;= 5) {</span>
<span class="x">    $x = 2 * $x;</span>
<span class="x">} else {</span>
<span class="x">    throw new DomainException(&#39;$x is too large&#39;);</span>
<span class="x">}</span>
</pre></div>
</div>
<p>Sinds PHP 8 is <code class="docutils literal notranslate"><span class="pre">throw</span></code> een expressie, geen statement. Dit betekent niet dat
het niet als statement gebruikt mag worden; alle expressies mogen namelijk als
statement gebruikt worden. Het betekent wel dat <code class="docutils literal notranslate"><span class="pre">throw</span></code> bijvoorbeeld
gebruikt kan worden met de ternary conditionele operator <code class="docutils literal notranslate"><span class="pre">?:</span></code>. Bovenstaande
code kan dus ook als volgt worden geschreven.</p>
<div class="highlight-php notranslate"><div class="highlight"><pre><span></span><span class="x">$x = $x &lt;= 5 ? 2 * $x : throw new DomainException(&#39;$x is too large&#39;);</span>
</pre></div>
</div>
<p>De toegevoegde waarde hiervan is met name dat ook bij gebruik van arrow
functies, die in een later hoofdstuk besproken zullen worden, excepties
gegooid kunnen worden, waardoor de code korter en duidelijker kan worden.</p>
<p>Excepties kunnen ook afgevangen worden door middel van een
<code class="docutils literal notranslate"><span class="pre">try</span></code>-<code class="docutils literal notranslate"><span class="pre">catch</span></code>-blok, vergelijkbaar met Java. Excepties die in het <code class="docutils literal notranslate"><span class="pre">try</span></code>-blok
worden gegooid zullen de applicatie niet stoppen; in plaats daarvan wordt de
code in het toepasselijke <code class="docutils literal notranslate"><span class="pre">catch</span></code>-blok uitgevoerd. Het is ook mogelijk om
het blok te eindigen met een <code class="docutils literal notranslate"><span class="pre">finally</span></code>-blok dat altijd wordt uitgevoerd,
ongeacht of er een exceptie is gegooid. In het <code class="docutils literal notranslate"><span class="pre">catch</span></code>-blok mag ook een
nieuwe exceptie gegooid worden die dan eventueel in een bovenliggend
<code class="docutils literal notranslate"><span class="pre">try</span></code>-<code class="docutils literal notranslate"><span class="pre">catch</span></code>-blok gevangen kan worden.</p>
<p><code class="docutils literal notranslate"><span class="pre">catch</span></code>-blokken moeten specificeren welke klassen van excepties ze afvangen.
Hiertoe moet na het keyword <code class="docutils literal notranslate"><span class="pre">catch</span></code> een exceptienaam tussen haakjes worden
gezet. Het is toegestaan om meerdere <code class="docutils literal notranslate"><span class="pre">catch</span></code>-blokken te hebben die ieder een
andere exceptie afvangen; deze worden van boven naar beneden gecontroleerd
en het eerste passende blok wordt gebruikt. Een enkel <code class="docutils literal notranslate"><span class="pre">catch</span></code>-blok kan ook
meerdere exceptieklassen afvangen; de namen moeten dan gescheiden worden
door het pipekarakter <code class="docutils literal notranslate"><span class="pre">|</span></code>. Indien gewenst kan na de klassenaam een
variabelenaam worden gezet; de exceptie wordt in dat geval toegekend aan die
variabele zodat hiernaar verwezen kan worden in het <code class="docutils literal notranslate"><span class="pre">catch</span></code>-blok.</p>
<p>Enkele mogelijkheden van het <code class="docutils literal notranslate"><span class="pre">try</span></code>-<code class="docutils literal notranslate"><span class="pre">catch</span></code>-blok worden getoond in het
onderstaande voorbeeld.</p>
<div class="highlight-php notranslate"><div class="highlight"><pre><span></span><span class="x">function divide($x, $y)</span>
<span class="x">{</span>
<span class="x">    try {</span>
<span class="x">        return $x / $y;</span>
<span class="x">    } catch (DivisionByZeroError) {</span>
<span class="x">        throw new DomainException(&#39;$y cannot be zero&#39;);</span>
<span class="x">    } catch (TypeError|Exception $e) {</span>
<span class="x">        echo &quot;Unexpected error: $e\n&quot;;</span>
<span class="x">    } finally {</span>
<span class="x">        echo &quot;This code is always executed.\n&quot;;</span>
<span class="x">    }</span>
<span class="x">}</span>
</pre></div>
</div>
<p>Als deze functie wordt uitgevoerd, zal in alle gevallen de code in het
<code class="docutils literal notranslate"><span class="pre">finally</span></code>-blok worden uitgevoerd; daarnaast zal, als <code class="docutils literal notranslate"><span class="pre">$y</span></code> gelijk is aan 0,
uiteindelijk een <code class="docutils literal notranslate"><span class="pre">DomainException</span></code> worden gegooid.</p>
<p>PHP kent twee ingebouwde hiërarchieën voor exceptieklassen. Excepties waren
namelijk oorspronkelijk altijd instanties van <code class="docutils literal notranslate"><span class="pre">Exception</span></code> of een subklasse.
Sinds PHP 7 worden een aantal foutcondities die voorheen als error werden
afgehandeld ook afgehandeld via het exceptiesysteem. Een voorbeeld hiervan
is delen door 0, dat sinds PHP 7 een <code class="docutils literal notranslate"><span class="pre">DivisionByZeroError</span></code> gooit. Deze
foutcondities gooien excepties die een instantie van <code class="docutils literal notranslate"><span class="pre">Error</span></code> of een
subklasse daarvan zijn. Als dus <code class="docutils literal notranslate"><span class="pre">Exception</span></code> wordt gevangen, hetgeen
gebruikelijk was in PHP-5-code, de zogeheten <em>Pokémon exception handling</em>
(“Gotta catch ‘em all”), worden deze nieuwe errors niet afgevangen. Er is in
PHP 7 ook een nieuw supertype van <code class="docutils literal notranslate"><span class="pre">Exception</span></code> en <code class="docutils literal notranslate"><span class="pre">Error</span></code> in het leven
geroepen, <code class="docutils literal notranslate"><span class="pre">Throwable</span></code>. Alleen instanties van subklassen van dit type kunnen
in een <code class="docutils literal notranslate"><span class="pre">throw</span></code>-expressie gebruikt worden.</p>
<p>Aangezien het in een webapplicatie vaak wenselijk is om excepties die nergens
anders worden afgevangen toch om te zetten in een redelijke foutpagina, zal er
vaak op een heel hoog niveau een <code class="docutils literal notranslate"><span class="pre">try</span></code>-<code class="docutils literal notranslate"><span class="pre">catch</span></code>-blok zijn dat <code class="docutils literal notranslate"><span class="pre">Throwable</span></code>
afhandelt. Een andere manier om dit te bewerkstelligen is door het
registreren van een <em>exception handler</em>. Dit is een functie die wordt
aangeroepen als een exceptie nergens anders is afgehandeld. Nadat deze
functie is uitgevoerd, wordt de applicatie gestopt. Als dit niet wenselijk
is, moet een <code class="docutils literal notranslate"><span class="pre">try</span></code>-<code class="docutils literal notranslate"><span class="pre">catch</span></code>-blok gebruikt <a class="reference external" href="http://worden.Om">worden.Om</a> PHP te vertellen welke
functie hiervoor gebruikt wordt, moet de functie
<a class="reference external" href="https://www.php.net/manual/en/function.set-exception-handler.php"><code class="docutils literal notranslate"><span class="pre">set_exception_handler</span></code></a>
aangroepen worden met een string met de naam van de te gebruiken functie als
eerste argument, zoals in onderstaande voorbeeld.</p>
<div class="highlight-php notranslate"><div class="highlight"><pre><span></span><span class="x">function exception_handler(Throwable $exception): void {</span>
<span class="x">  echo &quot;Uncaught exception: {$exception-&gt;getMessage()}\n&quot;;</span>
<span class="x">}</span>

<span class="x">set_exception_handler(&#39;exception_handler&#39;);</span>

<span class="x">$x = 1/0;</span>
<span class="x">echo &quot;1/0 = $x&quot;;</span>
</pre></div>
</div>
<p>Deze code zal <code class="docutils literal notranslate"><span class="pre">Uncaught</span> <span class="pre">exception:</span> <span class="pre">Division</span> <span class="pre">by</span> <span class="pre">zero</span></code> afdrukken. Het laatste
<code class="docutils literal notranslate"><span class="pre">echo</span></code>-statement zal niet worden uitgevoerd.</p>
</section>
</section>

    <script type="text/x-thebe-config">
    {
        requestKernel: true,
        binderOptions: {
            repo: "binder-examples/jupyter-stacks-datascience",
            ref: "master",
        },
        codeMirrorConfig: {
            theme: "abcdef",
            mode: "python"
        },
        kernelOptions: {
            name: "python3",
            path: "./1.2-php"
        },
        predefinedOutput: true
    }
    </script>
    <script>kernelName = 'python3'</script>

                </article>
              

              
              
              
              
                <footer class="prev-next-footer d-print-none">
                  
<div class="prev-next-area">
    <a class="left-prev"
       href="oop.html"
       title="previous page">
      <i class="fa-solid fa-angle-left"></i>
      <div class="prev-next-info">
        <p class="prev-next-subtitle">vorige</p>
        <p class="prev-next-title">Object-georiënteerd programmeren</p>
      </div>
    </a>
    <a class="right-next"
       href="oefening.html"
       title="next page">
      <div class="prev-next-info">
        <p class="prev-next-subtitle">volgende</p>
        <p class="prev-next-title">Oefening</p>
      </div>
      <i class="fa-solid fa-angle-right"></i>
    </a>
</div>
                </footer>
              
            </div>
            
            
              
                <dialog id="pst-secondary-sidebar-modal"></dialog>
                <div id="pst-secondary-sidebar" class="bd-sidebar-secondary bd-toc"><div class="sidebar-secondary-items sidebar-secondary__inner">


  <div class="sidebar-secondary-item">
  <div class="page-toc tocsection onthispage">
    <i class="fa-solid fa-list"></i> Inhoud
  </div>
  <nav class="bd-toc-nav page-toc">
    <ul class="visible nav section-nav flex-column">
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#">Foutafhandeling</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#errors">Errors</a><ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#excepties">Excepties</a></li>
</ul>
</li>
</ul>

  </nav></div>

</div></div>
              
            
          </div>
          <footer class="bd-footer-content">
            
<div class="bd-footer-content__inner container">
  
  <div class="footer-item">
    
<p class="component-author">
Door Bart Barnard & Ralf van den Broek
</p>

  </div>
  
  <div class="footer-item">
    

  </div>
  
  <div class="footer-item">
    
  </div>
  
  <div class="footer-item">
    
  </div>
  
</div>
          </footer>
        

      </main>
    </div>
  </div>
  
  <!-- Scripts loaded after <body> so the DOM is not blocked -->
  <script defer src="../_static/scripts/bootstrap.js?digest=26a4bc78f4c0ddb94549"></script>
<script defer src="../_static/scripts/pydata-sphinx-theme.js?digest=26a4bc78f4c0ddb94549"></script>

  <footer class="bd-footer">
  </footer>
  </body>
</html>