
<!DOCTYPE html>


<html lang="nl" data-content_root="../" >

  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="viewport" content="width=device-width, initial-scale=1" />

    <title>Templating &#8212; Webtechnologie II</title>
  
  
  
  <script data-cfasync="false">
    document.documentElement.dataset.mode = localStorage.getItem("mode") || "";
    document.documentElement.dataset.theme = localStorage.getItem("theme") || "";
  </script>
  <!-- 
    this give us a css class that will be invisible only if js is disabled 
  -->
  <noscript>
    <style>
      .pst-js-only { display: none !important; }

    </style>
  </noscript>
  
  <!-- Loaded before other Sphinx assets -->
  <link href="../_static/styles/theme.css?digest=26a4bc78f4c0ddb94549" rel="stylesheet" />
<link href="../_static/styles/pydata-sphinx-theme.css?digest=26a4bc78f4c0ddb94549" rel="stylesheet" />

    <link rel="stylesheet" type="text/css" href="../_static/pygments.css?v=fa44fd50" />
    <link rel="stylesheet" type="text/css" href="../_static/styles/sphinx-book-theme.css?v=384b581d" />
    <link rel="stylesheet" type="text/css" href="../_static/togglebutton.css?v=13237357" />
    <link rel="stylesheet" type="text/css" href="../_static/copybutton.css?v=949a1ff5" />
    <link rel="stylesheet" type="text/css" href="../_static/mystnb.4510f1fc1dee50b3e5859aac5469c37c29e427902b24a333a5f9fcb2f0b3ac41.css" />
    <link rel="stylesheet" type="text/css" href="../_static/sphinx-thebe.css?v=4fa983c6" />
    <link rel="stylesheet" type="text/css" href="../_static/sphinx-design.min.css?v=95c83b7e" />
    <link rel="stylesheet" type="text/css" href="../_static/custom.css?v=91d546e9" />
  
  <!-- So that users can add custom icons -->
  <script src="../_static/scripts/fontawesome.js?digest=26a4bc78f4c0ddb94549"></script>
  <!-- Pre-loaded scripts that we'll load fully later -->
  <link rel="preload" as="script" href="../_static/scripts/bootstrap.js?digest=26a4bc78f4c0ddb94549" />
<link rel="preload" as="script" href="../_static/scripts/pydata-sphinx-theme.js?digest=26a4bc78f4c0ddb94549" />

    <script src="../_static/documentation_options.js?v=b028fc25"></script>
    <script src="../_static/doctools.js?v=9a2dae69"></script>
    <script src="../_static/sphinx_highlight.js?v=dc90522c"></script>
    <script src="../_static/clipboard.min.js?v=a7894cd8"></script>
    <script src="../_static/copybutton.js?v=ff8fa330"></script>
    <script src="../_static/scripts/sphinx-book-theme.js?v=efea14e4"></script>
    <script>let toggleHintShow = 'Click to show';</script>
    <script>let toggleHintHide = 'Click to hide';</script>
    <script>let toggleOpenOnPrint = 'true';</script>
    <script src="../_static/togglebutton.js?v=4a39c7ea"></script>
    <script src="../_static/translations.js?v=5ce3cdba"></script>
    <script>var togglebuttonSelector = '.toggle, .admonition.dropdown';</script>
    <script src="../_static/design-tabs.js?v=f930bc37"></script>
    <script>const THEBE_JS_URL = "https://unpkg.com/thebe@0.8.2/lib/index.js"; const thebe_selector = ".thebe,.cell"; const thebe_selector_input = "pre"; const thebe_selector_output = ".output, .cell_output"</script>
    <script async="async" src="../_static/sphinx-thebe.js?v=c100c467"></script>
    <script>var togglebuttonSelector = '.toggle, .admonition.dropdown';</script>
    <script>const THEBE_JS_URL = "https://unpkg.com/thebe@0.8.2/lib/index.js"; const thebe_selector = ".thebe,.cell"; const thebe_selector_input = "pre"; const thebe_selector_output = ".output, .cell_output"</script>
    <script>DOCUMENTATION_OPTIONS.pagename = '4.1-templating/intro';</script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Zoeken" href="../search.html" />
    <link rel="next" title="Opgave" href="opgave.html" />
    <link rel="prev" title="Interfaces" href="../3.2-routing/interface.html" />
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <meta name="docsearch:language" content="nl"/>
  <meta name="docsearch:version" content="" />
  </head>
  
  
  <body data-bs-spy="scroll" data-bs-target=".bd-toc-nav" data-offset="180" data-bs-root-margin="0px 0px -60%" data-default-mode="">

  
  
  <div id="pst-skip-link" class="skip-link d-print-none"><a href="#main-content">Skip to main content</a></div>
  
  <div id="pst-scroll-pixel-helper"></div>
  
  <button type="button" class="btn rounded-pill" id="pst-back-to-top">
    <i class="fa-solid fa-arrow-up"></i>Back to top</button>

  
  <dialog id="pst-search-dialog">
    
<form class="bd-search d-flex align-items-center"
      action="../search.html"
      method="get">
  <i class="fa-solid fa-magnifying-glass"></i>
  <input type="search"
         class="form-control"
         name="q"
         placeholder="Search this book..."
         aria-label="Search this book..."
         autocomplete="off"
         autocorrect="off"
         autocapitalize="off"
         spellcheck="false"/>
  <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd>K</kbd></span>
</form>
  </dialog>

  <div class="pst-async-banner-revealer d-none">
  <aside id="bd-header-version-warning" class="d-none d-print-none" aria-label="Version warning"></aside>
</div>

  
    <header class="bd-header navbar navbar-expand-lg bd-navbar d-print-none">
    </header>
  

  <div class="bd-container">
    <div class="bd-container__inner bd-page-width">
      
      
      
      <dialog id="pst-primary-sidebar-modal"></dialog>
      <div id="pst-primary-sidebar" class="bd-sidebar-primary bd-sidebar">
        

  
  <div class="sidebar-header-items sidebar-primary__section">
    
    
    
    
  </div>
  
    <div class="sidebar-primary-items__start sidebar-primary__section">
        <div class="sidebar-primary-item">

  
    
  

<a class="navbar-brand logo" href="../about/syllabus.html">
  
  
  
  
  
    
    
      
    
    
    <img src="../_static/logo-hanze.png" class="logo__image only-light" alt="Webtechnologie II - Home"/>
    <img src="../_static/logo-hanze.png" class="logo__image only-dark pst-js-only" alt="Webtechnologie II - Home"/>
  
  
</a></div>
        <div class="sidebar-primary-item">

<button class="btn search-button-field search-button__button pst-js-only" title="Zoeken" aria-label="Zoeken" data-bs-placement="bottom" data-bs-toggle="tooltip">
 <i class="fa-solid fa-magnifying-glass"></i>
 <span class="search-button__default-text">Zoeken</span>
 <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd class="kbd-shortcut__modifier">K</kbd></span>
</button></div>
        <div class="sidebar-primary-item"><nav class="bd-links bd-docs-nav" aria-label="Main">
    <div class="bd-toc-item navbar-nav active">
        
        <ul class="nav bd-sidenav bd-sidenav__home-link">
            <li class="toctree-l1">
                <a class="reference internal" href="../about/syllabus.html">
                    Webtechnologie 2
                </a>
            </li>
        </ul>
        <p aria-level="2" class="caption" role="heading"><span class="caption-text">Over deze cursus</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="../about/introductie.html">Introductie</a></li>
<li class="toctree-l1"><a class="reference internal" href="../about/eindopdracht.html">Eindopdracht</a></li>
<li class="toctree-l1"><a class="reference internal" href="../about/installeren.html">PHP installeren</a></li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">1.1 PHP</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="../1.1-php/php.html">PHP</a></li>
<li class="toctree-l1"><a class="reference internal" href="../1.1-php/variabelen.html">Variabelen</a></li>
<li class="toctree-l1"><a class="reference internal" href="../1.1-php/controlestatements.html">Conditionele en lusstatements</a></li>
<li class="toctree-l1"><a class="reference internal" href="../1.1-php/strings.html">Strings</a></li>
<li class="toctree-l1"><a class="reference internal" href="../1.1-php/arrays.html">Arrays</a></li>
<li class="toctree-l1"><a class="reference internal" href="../1.1-php/oefening.html">Oefeningen</a></li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">1.2 PHP</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="../1.2-php/functies.html">Functies</a></li>
<li class="toctree-l1"><a class="reference internal" href="../1.2-php/typeconversie.html">Typeconversie</a></li>
<li class="toctree-l1"><a class="reference internal" href="../1.2-php/oop.html">Object-geori√´nteerd programmeren</a></li>
<li class="toctree-l1"><a class="reference internal" href="../1.2-php/excepties.html">Foutafhandeling</a></li>
<li class="toctree-l1"><a class="reference internal" href="../1.2-php/include.html">Bestanden invoegen</a></li>
<li class="toctree-l1"><a class="reference internal" href="../1.2-php/oefening.html">Oefeningen</a></li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">2.1 HTML en CSS</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="../2.1-html/html.html">HTML</a></li>
<li class="toctree-l1"><a class="reference internal" href="../2.1-html/css.html">CSS</a></li>
<li class="toctree-l1"><a class="reference internal" href="../2.1-html/formulieren.html">Formulieren</a></li>
<li class="toctree-l1"><a class="reference internal" href="../2.1-html/oefening.html">Oefeningen</a></li>
<li class="toctree-l1"><a class="reference internal" href="../2.1-html/opdracht.html">Opdracht</a></li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">2.2 Kernel</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="../2.2-kernel/http.html">HTTP</a></li>
<li class="toctree-l1"><a class="reference internal" href="../2.2-kernel/kernel.html">Kernel</a></li>
<li class="toctree-l1"><a class="reference internal" href="../2.2-kernel/autoloader.html">Autoloader</a></li>
<li class="toctree-l1"><a class="reference internal" href="../2.2-kernel/composer.html">Composer</a></li>
<li class="toctree-l1"><a class="reference internal" href="../2.2-kernel/oefening.html">Oefeningen</a></li>
<li class="toctree-l1"><a class="reference internal" href="../2.2-kernel/opdracht.html">Opdracht</a></li>
<li class="toctree-l1"><a class="reference internal" href="../2.2-kernel/interface.html">Interfaces</a></li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">3.1 Request</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="../3.1-request/intro.html">Request, Response en Message</a></li>
<li class="toctree-l1"><a class="reference internal" href="../3.1-request/request.html">Request</a></li>
<li class="toctree-l1"><a class="reference internal" href="../3.1-request/oefening.html">Oefening</a></li>
<li class="toctree-l1"><a class="reference internal" href="../3.1-request/opdracht.html">Opdracht</a></li>
<li class="toctree-l1"><a class="reference internal" href="../3.1-request/interface.html">Interfaces</a></li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">3.2 Routing</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="../3.2-routing/frontcontroller.html">De front controller</a></li>
<li class="toctree-l1"><a class="reference internal" href="../3.2-routing/router.html">De router</a></li>
<li class="toctree-l1"><a class="reference internal" href="../3.2-routing/callable.html">Verwijzingen naar functies</a></li>
<li class="toctree-l1"><a class="reference internal" href="../3.2-routing/regex.html">Reguliere expressies</a></li>
<li class="toctree-l1"><a class="reference internal" href="../3.2-routing/oefening.html">Oefeningen</a></li>
<li class="toctree-l1"><a class="reference internal" href="../3.2-routing/opdracht.html">Opdracht</a></li>
<li class="toctree-l1"><a class="reference internal" href="../3.2-routing/interface.html">Interfaces</a></li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">4.1 Templating</span></p>
<ul class="current nav bd-sidenav">
<li class="toctree-l1 current active"><a class="current reference internal" href="#">Templating</a></li>
<li class="toctree-l1"><a class="reference internal" href="opgave.html">Opgave</a></li>
<li class="toctree-l1"><a class="reference internal" href="interface.html">Interfaces</a></li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">4.2 Response</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="../4.2-response/response.html">Response</a></li>
<li class="toctree-l1"><a class="reference internal" href="../4.2-response/oefening.html">Oefeningen</a></li>
<li class="toctree-l1"><a class="reference internal" href="../4.2-response/opdracht.html">Opgave</a></li>
<li class="toctree-l1"><a class="reference internal" href="../4.2-response/interface.html">Interfaces</a></li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">5.1 Dependency injection</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="../5.1-di/service.html">Services</a></li>
<li class="toctree-l1"><a class="reference internal" href="../5.1-di/dependencyinjection.html">Dependency injection</a></li>
<li class="toctree-l1"><a class="reference internal" href="../5.1-di/compositionroot.html">Composition root</a></li>
<li class="toctree-l1"><a class="reference internal" href="../5.1-di/opdracht.html">Opdracht</a></li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">5.2 IoC container</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="../5.2-container/container.html">IoC container</a></li>
<li class="toctree-l1"><a class="reference internal" href="../5.2-container/voorbeeld.html">Voorbeeldcode</a></li>
<li class="toctree-l1"><a class="reference internal" href="../5.2-container/reflectie.html">Reflectie</a></li>
<li class="toctree-l1"><a class="reference internal" href="../5.2-container/oefening.html">Oefeningen</a></li>
<li class="toctree-l1"><a class="reference internal" href="../5.2-container/opdracht.html">Opdracht</a></li>
<li class="toctree-l1"><a class="reference internal" href="../5.2-container/interface.html">Interfaces</a></li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">6.1 Database</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="../6.1-database/intro.html">Intro</a></li>
<li class="toctree-l1"><a class="reference internal" href="../6.1-database/opgave.html">Opgave</a></li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">6.2 ORM</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="../6.2-orm/intro.html">Intro</a></li>
<li class="toctree-l1"><a class="reference internal" href="../6.2-orm/opgave.html">Opgave</a></li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">7.1 Authenticatie</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="../7.1-authenticatie/intro.html">Intro</a></li>
<li class="toctree-l1"><a class="reference internal" href="../7.1-authenticatie/opgave.html">Opgave</a></li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">7.2 Autorisatie</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="../7.2-autorisatie/intro.html">Intro</a></li>
<li class="toctree-l1"><a class="reference internal" href="../7.2-autorisatie/opgave.html">Opgave</a></li>
</ul>

    </div>
</nav></div>
    </div>
  
  
  <div class="sidebar-primary-items__end sidebar-primary__section">
  </div>
  
  <div id="rtd-footer-container"></div>


      </div>
      
      <main id="main-content" class="bd-main" role="main">
        
        

<div class="sbt-scroll-pixel-helper"></div>

          <div class="bd-content">
            <div class="bd-article-container">
              
              <div class="bd-header-article d-print-none">
<div class="header-article-items header-article__inner">
  
    <div class="header-article-items__start">
      
        <div class="header-article-item"><label class="sidebar-toggle primary-toggle btn btn-sm" for="__primary" title="Toggle primary sidebar" data-bs-placement="bottom" data-bs-toggle="tooltip">
  <span class="fa-solid fa-bars"></span>
</label></div>
      
    </div>
  
  
    <div class="header-article-items__end">
      
        <div class="header-article-item">

<div class="article-header-buttons">





<div class="dropdown dropdown-download-buttons">
  <button class="btn dropdown-toggle" type="button" data-bs-toggle="dropdown" aria-expanded="false" aria-label="Download deze pagina">
    <i class="fas fa-download"></i>
  </button>
  <ul class="dropdown-menu">
      
      
      
      <li><a href="../_sources/4.1-templating/intro.md" target="_blank"
   class="btn btn-sm btn-download-source-button dropdown-item"
   title="Download het bronbestand"
   data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-file"></i>
  </span>
<span class="btn__text-container">.md</span>
</a>
</li>
      
      
      
      
      <li>
<button onclick="window.print()"
  class="btn btn-sm btn-download-pdf-button dropdown-item"
  title="Afdrukken naar pdf"
  data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-file-pdf"></i>
  </span>
<span class="btn__text-container">.pdf</span>
</button>
</li>
      
  </ul>
</div>




<button onclick="toggleFullScreen()"
  class="btn btn-sm btn-fullscreen-button"
  title="Volledig scherm"
  data-bs-placement="bottom" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-expand"></i>
  </span>

</button>



<button class="btn btn-sm nav-link pst-navbar-icon theme-switch-button pst-js-only" aria-label="Color mode" data-bs-title="Color mode"  data-bs-placement="bottom" data-bs-toggle="tooltip">
  <i class="theme-switch fa-solid fa-sun                fa-lg" data-mode="light" title="Light"></i>
  <i class="theme-switch fa-solid fa-moon               fa-lg" data-mode="dark"  title="Dark"></i>
  <i class="theme-switch fa-solid fa-circle-half-stroke fa-lg" data-mode="auto"  title="System Settings"></i>
</button>


<button class="btn btn-sm pst-navbar-icon search-button search-button__button pst-js-only" title="Zoeken" aria-label="Zoeken" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <i class="fa-solid fa-magnifying-glass fa-lg"></i>
</button>
<label class="sidebar-toggle secondary-toggle btn btn-sm" for="__secondary"title="Toggle secondary sidebar" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <span class="fa-solid fa-list"></span>
</label>
</div></div>
      
    </div>
  
</div>
</div>
              
              

<div id="jb-print-docs-body" class="onlyprint">
    <h1>Templating</h1>
    <!-- Table of contents -->
    <div id="print-main-content">
        <div id="jb-print-toc">
            
            <div>
                <h2> Inhoud </h2>
            </div>
            <nav aria-label="Page">
                <ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#model-view-controller">Model-View-Controller</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#een-html-bestand-inlezen">Een html-bestand inlezen</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#output-buffering">Output buffering</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#de-functie-eval">De functie <code class="docutils literal notranslate"><span class="pre">Eval</span></code></a></li>
</ul>
            </nav>
        </div>
    </div>
</div>

              
                
<div id="searchbox"></div>
                <article class="bd-article">
                  
  <section class="tex2jax_ignore mathjax_ignore" id="templating">
<h1>Templating<a class="headerlink" href="#templating" title="Link to this heading">#</a></h1>
<p>Tot nu toe hebben we in de methode <code class="docutils literal notranslate"><span class="pre">handle</span></code> van onze diverse kernels eenvoudig een stuk tekst teruggegeven:</p>
<div class="highlight-php notranslate"><div class="highlight"><pre><span></span><span class="cp">&lt;?php</span>
  <span class="c1">//andere code weggelaten</span>
  <span class="k">public</span> <span class="k">function</span> <span class="nf">handle</span><span class="p">(</span><span class="nx">Request</span> <span class="nv">$request</span><span class="p">)</span><span class="o">:</span> <span class="nx">string</span>
  <span class="p">{</span>
    <span class="nv">$name</span> <span class="o">=</span> <span class="nv">$request</span><span class="o">-&gt;</span><span class="na">getQueryParams</span><span class="p">()[</span><span class="s1">&#39;name&#39;</span><span class="p">];</span>
    <span class="k">return</span> <span class="s2">&quot;Hello, </span><span class="si">$name</span><span class="s2">&quot;</span><span class="p">;</span>
  <span class="p">}</span>
</pre></div>
</div>
<p>Hoewel dit werkt, spreekt het redelijk voor zich dat dit niet echt schaalbaar of onderhoudbaar is. In de regel bestaan <em>responses</em> uit vele kilobytes aan data, en de zou niet handig zijn wanneer we al deze data eenvoudig als string in een <code class="docutils literal notranslate"><span class="pre">handle</span></code>-methode zouden defini√´ren:</p>
<div class="highlight-php notranslate"><div class="highlight"><pre><span></span><span class="cp">&lt;?php</span>
  <span class="c1">//andere code weggelaten</span>
  <span class="k">public</span> <span class="k">function</span> <span class="nf">handle</span><span class="p">(</span><span class="nx">Request</span> <span class="nv">$request</span><span class="p">)</span><span class="o">:</span> <span class="nx">string</span>
  <span class="p">{</span>
    <span class="nv">$name</span> <span class="o">=</span> <span class="nv">$request</span><span class="o">-&gt;</span><span class="na">getQueryParams</span><span class="p">()[</span><span class="s1">&#39;name&#39;</span><span class="p">];</span>
    <span class="k">return</span> <span class="s2">&quot;</span>
<span class="s2">&lt;!DOCTYPE html&gt;</span>
<span class="s2">&lt;html lang=&quot;</span><span class="nx">nl</span><span class="s2">&quot; data-content_root=&quot;</span><span class="o">../</span><span class="s2">&quot; &gt;</span>

<span class="s2">  &lt;head&gt;</span>
<span class="s2">    &lt;meta charset=&quot;</span><span class="nx">utf</span><span class="o">-</span><span class="mi">8</span><span class="s2">&quot; /&gt;</span>
<span class="s2">    &lt;meta name=&quot;</span><span class="nx">viewport</span><span class="s2">&quot; content=&quot;</span><span class="nx">width</span><span class="o">=</span><span class="nx">device</span><span class="o">-</span><span class="nx">width</span><span class="p">,</span> <span class="nx">initial</span><span class="o">-</span><span class="nx">scale</span><span class="o">=</span><span class="mf">1.0</span><span class="s2">&quot; /&gt;&lt;meta name=&quot;</span><span class="nx">viewport</span><span class="s2">&quot; content=&quot;</span><span class="nx">width</span><span class="o">=</span><span class="nx">device</span><span class="o">-</span><span class="nx">width</span><span class="p">,</span> <span class="nx">initial</span><span class="o">-</span><span class="nx">scale</span><span class="o">=</span><span class="mi">1</span><span class="s2">&quot; /&gt;</span>
<span class="s2">    &lt;title&gt;Request &amp;#8212; Webtechnologie II&lt;/title&gt;</span>
<span class="s2">  &lt;script data-cfasync=&quot;</span><span class="k">false</span><span class="s2">&quot;&gt;</span>
<span class="s2">    document.documentElement.dataset.mode = localStorage.getItem(&quot;</span><span class="nx">mode</span><span class="s2">&quot;) || &quot;&quot;;</span>
<span class="s2">    document.documentElement.dataset.theme = localStorage.getItem(&quot;</span><span class="nx">theme</span><span class="s2">&quot;) || &quot;&quot;;</span>
<span class="s2">  &lt;/script&gt;</span>
<span class="s2">    ...</span>
<span class="s2">    &lt;/body&gt;&lt;/html&quot;</span><span class="p">;</span>
</pre></div>
</div>
<p>Om deze reden willen we de <em>html</em> scheiden van de <em>logica</em> van onze applicatie. De gedachte is dan dat onze <code class="docutils literal notranslate"><span class="pre">handle</span></code>-methode het juiste html-bestand opzoekt en deze retourneert.</p>
<p>Behalve deze voor de hand liggende reden, zijn er nog twee eveneens belangrijke, maar minder evidente redenen voor deze scheiding. Allereerst is het schrijven van goede html een heel andere capaciteit dan het schrijven van progammacode ‚Äì activiteiten die derhalve dikwijls door diverse personen worden gedaan. Een dergelijke scheiding maakt het samenwerking door deze personen een stuk eenvoudiger.</p>
<p>En zelfs ‚Äì ten tweede ‚Äì wanneer dezelfde persoon zowel de html als de programmacode schrijft, dan nog is het voor deze persoon lekker wanneer hij of zij zich helemaal kan richten op het √©√©n of het ander. Wanneer je de hele tijd moet schakelen tussen code of html zal dat de concentratie op beiden niet ten goede komen.</p>
<section id="model-view-controller">
<h2>Model-View-Controller<a class="headerlink" href="#model-view-controller" title="Link to this heading">#</a></h2>
<p>De scheiding tussen logica, html en data kent binnen software engineerin een relatief oude en goede traditie ‚Äì ouder dan internet of html. Het staat bekend onder de term <em>Model-View-Controller</em>, wat eind jaren zeventig is bedacht door <a class="reference external" href="https://en.wikipedia.org/wiki/Trygve_Reenskaug">Trygve Reenskaug</a>. Zoals de naam al doet vermoeden, kent deze architectuur drie onderdelen:</p>
<ul class="simple">
<li><p>Het <em>model</em> is de interne representatie van de informatie die door het systeem beschikbaar gemaakt wordt.</p></li>
<li><p>De <em>view</em> is de presentatie van deze informatie, dat wat de bezoeker of gebruiker van de applicatie ziet en waar hij of zij mee interacteert.</p></li>
<li><p>De <em>controller</em> is de <em>applicatielogica</em> die de verbinding maakt tussen de <em>view</em> en het <em>model</em>.</p></li>
</ul>
<p>Zie het plaatje hieronder (van <a class="reference external" href="https://nl.wikipedia.org/wiki/Model-view-controller">wikipedia</a>). Hierin zie je hoe de gebruiker van een systeem interacteert met de controller. Deze <em>controller</em> verandert de interne representatie van het model, waardoor de <em>view</em> ge√ºpdate wordt, wat de gebruiker vervolgens weer ziet.</p>
<p><img alt="Overzicht van de verhouding tussen model, view en controller" src="../_images/mvc-wikipedia.jpeg" /></p>
<p>Er zijn verschillende antwoorden mogelijk op de vraag hoe de view aan de actuele informatie komt. In het plaatje hierboven komt het over alsof het model zelf verantwoordelijk is voor het updaten van de view, maar meestal gaat dat via de controller. Er zijn overigens in de loop der tijd allerlei subtiele varianten van het standaardmodel bedacht, zoals <a class="reference external" href="https://en.wikipedia.org/wiki/Model%E2%80%93view%E2%80%93adapter"><em>Model View Adapter</em></a>, het <a class="reference external" href="https://en.wikipedia.org/wiki/Model%E2%80%93view%E2%80%93presenter"><em>Model View Presenter</em></a> of het <a class="reference external" href="https://en.wikipedia.org/wiki/Model%E2%80%93view%E2%80%93viewmodel">*Model View ViewModel</a> (wat in iOS applicaties gebruikt wordt).</p>
<p>In een webcontext is het model in de regel een <em>database</em>, de controller wordt gevormd door de verschillende <em>controllers</em> (waar we het al over hebben gehad) en is de <em>view</em> de uiteindelijke html die door de client wordt gerenderd. Het is de bedoeling van de controller om de representatie van de data in de view te injecteren en deze vervolgens naar de client te sturen.</p>
</section>
<section id="een-html-bestand-inlezen">
<h2>Een html-bestand inlezen<a class="headerlink" href="#een-html-bestand-inlezen" title="Link to this heading">#</a></h2>
<p>Laten we verder gaan met de <code class="docutils literal notranslate"><span class="pre">HelloKernel</span></code>, waar we <a class="reference internal" href="../3.1-request/request.html"><span class="std std-doc">in hoofdstuk 3.1</span></a> mee zijn begonnen. Dankzij de DSL-opbouw van PHP is het vrij eenvoudig om direct een html-bestand in te lezen. Stel je voor dat we het onderstaande (zeer eenvoudige) html-bestand <code class="docutils literal notranslate"><span class="pre">welkom.html</span></code> in een directory <code class="docutils literal notranslate"><span class="pre">templates</span></code> hebben gezet:</p>
<div class="highlight-html notranslate"><div class="highlight"><pre><span></span><span class="p">&lt;</span><span class="nt">html</span><span class="p">&gt;</span>
<span class="p">&lt;</span><span class="nt">head</span><span class="p">&gt;</span>
    <span class="p">&lt;</span><span class="nt">meta</span> <span class="na">charset</span><span class="o">=</span><span class="s">&quot;UTF-8&quot;</span><span class="p">&gt;</span>
    <span class="p">&lt;</span><span class="nt">title</span><span class="p">&gt;</span>Vriendelijke welkomstpagina<span class="p">&lt;/</span><span class="nt">title</span><span class="p">&gt;</span>
<span class="p">&lt;/</span><span class="nt">head</span><span class="p">&gt;</span>
<span class="p">&lt;</span><span class="nt">body</span><span class="p">&gt;</span>
    <span class="p">&lt;</span><span class="nt">h1</span><span class="p">&gt;</span>Hallo allemaal üëã<span class="p">&lt;/</span><span class="nt">h1</span><span class="p">&gt;</span>
<span class="p">&lt;/</span><span class="nt">body</span><span class="p">&gt;</span>
<span class="p">&lt;/</span><span class="nt">html</span><span class="p">&gt;</span>
</pre></div>
</div>
<p>De methode <code class="docutils literal notranslate"><span class="pre">handle</span></code> in <code class="docutils literal notranslate"><span class="pre">HelloKernel</span></code> zag er tot nu toe als volgt uit:</p>
<div class="highlight-php notranslate"><div class="highlight"><pre><span></span><span class="cp">&lt;?php</span>
  <span class="c1">//andere code weggelaten</span>
  <span class="k">public</span> <span class="k">function</span> <span class="nf">handle</span><span class="p">(</span><span class="nx">Request</span> <span class="nv">$request</span><span class="p">)</span><span class="o">:</span> <span class="nx">string</span>
  <span class="p">{</span>
    <span class="nv">$name</span> <span class="o">=</span> <span class="nv">$request</span><span class="o">-&gt;</span><span class="na">getQueryParams</span><span class="p">()[</span><span class="s1">&#39;name&#39;</span><span class="p">];</span>
    <span class="k">return</span> <span class="s2">&quot;Hello, </span><span class="si">$name</span><span class="s2">&quot;</span><span class="p">;</span>
  <span class="p">}</span>
</pre></div>
</div>
<p>We kunnen de html van hierboven eenvoudig in deze methode inladen, door gebruik te maken van de - inmiddels overbekende - functie <a class="reference external" href="https://www.php.net/require"><code class="docutils literal notranslate"><span class="pre">require</span></code></a>:</p>
<div class="highlight-php notranslate"><div class="highlight"><pre><span></span><span class="cp">&lt;?php</span>
  <span class="c1">//andere code weggelaten</span>
  <span class="k">public</span> <span class="k">function</span> <span class="nf">handle</span><span class="p">(</span><span class="nx">Request</span> <span class="nv">$request</span><span class="p">)</span><span class="o">:</span> <span class="nx">string</span>
  <span class="p">{</span>
    <span class="nv">$name</span> <span class="o">=</span> <span class="nv">$request</span><span class="o">-&gt;</span><span class="na">getQueryParams</span><span class="p">()[</span><span class="s1">&#39;name&#39;</span><span class="p">];</span>
    <span class="k">require</span> <span class="s1">&#39;templates/welkom.html&#39;</span><span class="p">;</span>
    <span class="k">return</span> <span class="s2">&quot;Hello, </span><span class="si">$name</span><span class="s2">&quot;</span><span class="p">;</span>
  <span class="p">}</span>
</pre></div>
</div>
<p>Als je dit stukje code uitvoert, zul je zien dat een request naar de juiste pagina inderdaad de html laat zien:</p>
<p><img alt="Een template wordt direct ingeladen" src="../_images/templates1.jpeg" /></p>
<p>Dit resultaat is te verwachten wanneer je bedenkt hoe <code class="docutils literal notranslate"><span class="pre">require</span></code> ook al weer werkt: deze functie laadt een pagina in en voert de code daarin direct uit. Omdat dit html is, en er feitelijk geen php-code in staat, is het resultaat van deze functie-aanroep gewoon de html die in het betreffende bestand staat. En je ziet dat het return-statement in <code class="docutils literal notranslate"><span class="pre">handle</span></code> ook nog steeds effect heeft: de html wordt dus als het ware middenin die functie naar de client gestuurd.</p>
<p>Vanzelfsprekend is dit ongewenst gedrag. Niet alleen willen we niet dat er zomaar middenin een functie data naar een client wordt gestuurd, maar we willen ook controle houden over de data zolang deze zich in de functie bevindt.</p>
</section>
<section id="output-buffering">
<h2>Output buffering<a class="headerlink" href="#output-buffering" title="Link to this heading">#</a></h2>
<p>Om te voorkomen dat de output direct (zo snel mogelijk) naar de client wordt gestuurd, kunnen we gebruik maken van een techniek die bekend staat onder de naam <em>output buffering</em>. Wat dit feitelijk doet is alle data die normalitair zou worden uitgestuurd (geprint naar de terminal, verstuurd naar een client) <em>tegenhouden</em>, net zo lang totdat het commando gegeven wordt om de opgeslagen output uit te printen (te <em>flushen</em>).</p>
<p>In php zijn hiervoor de volgende commando‚Äôs van belang:</p>
<ul class="simple">
<li><p><a class="reference external" href="https://www.php.net/ob_start"><code class="docutils literal notranslate"><span class="pre">ob_start()</span></code></a>: aanzetten van *output buffering. In de documentatie lezen we ‚ÄúWhile output buffering is active no output is sent from the script, instead the output is stored in an internal buffer.‚Äù</p></li>
<li><p><a class="reference external" href="https://www.php.net/manual/en/function.ob-flush.php"><code class="docutils literal notranslate"><span class="pre">ob_flush()</span></code></a>: het versturen van de inhoud van de buffer naar de <em>output handler</em>.</p></li>
<li><p><a class="reference external" href="https://www.php.net/manual/en/function.ob-get-clean.php"><code class="docutils literal notranslate"><span class="pre">ob_get_clean()</span></code></a>: haalt de huidige inhoud van de <em>output buffer</em> op en zet het bufferen weer uit.</p></li>
</ul>
<p>Met deze kennis kunnen we de <code class="docutils literal notranslate"><span class="pre">handle</span></code>-methode in de <code class="docutils literal notranslate"><span class="pre">Kernel</span></code> als volgt aanpassen:</p>
<div class="highlight-php notranslate"><div class="highlight"><pre><span></span><span class="cp">&lt;?php</span>
  <span class="c1">//andere code weggelaten</span>
  <span class="k">public</span> <span class="k">function</span> <span class="nf">handle</span><span class="p">(</span><span class="nx">Request</span> <span class="nv">$request</span><span class="p">)</span><span class="o">:</span> <span class="nx">string</span>
  <span class="p">{</span>
    <span class="nb">ob_start</span><span class="p">();</span>
    <span class="nv">$name</span> <span class="o">=</span> <span class="nv">$request</span><span class="o">-&gt;</span><span class="na">getQueryParams</span><span class="p">()[</span><span class="s1">&#39;name&#39;</span><span class="p">];</span>
    <span class="k">require</span> <span class="s1">&#39;templates/welkom.html&#39;</span><span class="p">;</span>
    <span class="nv">$html</span> <span class="o">=</span> <span class="nb">ob_get_clean</span><span class="p">();</span>
    <span class="k">return</span> <span class="nv">$html</span> <span class="o">.</span> <span class="s2">&quot;Hello, </span><span class="si">$name</span><span class="s2">&quot;</span><span class="p">;</span>
  <span class="p">}</span>
</pre></div>
</div>
<p>Als je dit runt, zul je zien dat het resultaat nog steeds hetzelfde is. Dat is ook logisch, want functioneel hebben we eigenlijk nog niks aan de code veranderd. We weten evenwel hoe we php in html kunnen laten zien, bijvoorbeeld door gebruik te maken van de short-tag <code class="docutils literal notranslate"><span class="pre">&lt;?=</span> <span class="pre">...</span> <span class="pre">?&gt;</span></code>. Omdat de scope van <code class="docutils literal notranslate"><span class="pre">$name</span></code> binnen dezelfde score als de <code class="docutils literal notranslate"><span class="pre">ob_start()</span></code> valt, is deze variabele ook onmiddellijk bekend binnen onze template:</p>
<div class="highlight-html notranslate"><div class="highlight"><pre><span></span><span class="p">&lt;</span><span class="nt">html</span><span class="p">&gt;</span>
<span class="p">&lt;</span><span class="nt">head</span><span class="p">&gt;</span>
    <span class="p">&lt;</span><span class="nt">meta</span> <span class="na">charset</span><span class="o">=</span><span class="s">&quot;UTF-8&quot;</span><span class="p">&gt;</span>
    <span class="p">&lt;</span><span class="nt">title</span><span class="p">&gt;</span>Vriendelijke welkomstpagina<span class="p">&lt;/</span><span class="nt">title</span><span class="p">&gt;</span>
<span class="p">&lt;/</span><span class="nt">head</span><span class="p">&gt;</span>
<span class="p">&lt;</span><span class="nt">body</span><span class="p">&gt;</span>
    <span class="p">&lt;</span><span class="nt">h1</span><span class="p">&gt;</span>Hallo <span class="cp">&lt;?= $name ?&gt;</span> üëã<span class="p">&lt;/</span><span class="nt">h1</span><span class="p">&gt;</span>
<span class="p">&lt;/</span><span class="nt">body</span><span class="p">&gt;</span>
<span class="p">&lt;/</span><span class="nt">html</span><span class="p">&gt;</span>
</pre></div>
</div>
<p><img alt="Een template met werkende variabelen" src="../_images/templates2.jpeg" /></p>
</section>
<section id="de-functie-eval">
<h2>De functie <code class="docutils literal notranslate"><span class="pre">Eval</span></code><a class="headerlink" href="#de-functie-eval" title="Link to this heading">#</a></h2>
<p>Net als in de meeste andere programmeertalen kun je ook in php een string als php-code laten uitvoeren: in php gebruiken we hiervoor <a class="reference external" href="https://www.php.net/eval">de functie <code class="docutils literal notranslate"><span class="pre">eval</span></code></a>. Zie het onderstaande voorbeeld: op regel 2 defini√´ren we een variabel <code class="docutils literal notranslate"><span class="pre">$str</span></code> die een stukje valide php-code bevat. Deze code wordt op regel 3 uitgevoerd, waardoor de variabele <code class="docutils literal notranslate"><span class="pre">$demo</span></code> ge√Ønitialiseerd wordt en een waarde krijgt. Vervolgens wordt op de laatste regel die variabele afgedrukt.</p>
<div class="highlight-php notranslate" id="eval-script"><div class="highlight"><pre><span></span><span class="linenos">1</span><span class="cp">&lt;?php</span>
<span class="linenos">2</span><span class="nv">$str</span> <span class="o">=</span> <span class="s2">&quot;</span><span class="se">\$</span><span class="s2">demo=32;&quot;</span><span class="p">;</span>
<span class="linenos">3</span><span class="k">eval</span><span class="p">(</span><span class="nv">$str</span><span class="p">);</span>
<span class="linenos">4</span><span class="k">echo</span> <span class="nv">$demo</span><span class="p">;</span>
</pre></div>
</div>
<p>Je ziet dat we <code class="docutils literal notranslate"><span class="pre">$demo</span></code> niet echt expliciet hebben gedefinieerd: de IDE geeft ook aan dat die variabele niet bestaat - wat logisch is, want die IDE gaat niet al je strings langs om te checken of er toevallig valide php-code in staat, en gaat die zeker niet zonder meer voor je uitvoeren.</p>
<div class="warning admonition">
<p class="admonition-title">Gevaarlijk</p>
<p>Je kunt je voorstellen dat deze functie behoorlijk gevaarlijk is, omdat het zonder meer arbitraire php-code kan uitvoeren. Naar het schijnt heeft Rasmus Lerdorf <em>himself</em> ooit gesteld dat ‚Äúif eval is your answer you are probably asking the wrong question‚Äù.</p>
<p>Toch maken we voor dit onderdeel gebruik van deze functie. Dat kan op zich ook wel, zolang we maar de controle over de gebruikte templates en de data in eigen beheer houden.</p>
</div>
</section>
</section>

    <script type="text/x-thebe-config">
    {
        requestKernel: true,
        binderOptions: {
            repo: "binder-examples/jupyter-stacks-datascience",
            ref: "master",
        },
        codeMirrorConfig: {
            theme: "abcdef",
            mode: "python"
        },
        kernelOptions: {
            name: "python3",
            path: "./4.1-templating"
        },
        predefinedOutput: true
    }
    </script>
    <script>kernelName = 'python3'</script>

                </article>
              

              
              
              
              
                <footer class="prev-next-footer d-print-none">
                  
<div class="prev-next-area">
    <a class="left-prev"
       href="../3.2-routing/interface.html"
       title="previous page">
      <i class="fa-solid fa-angle-left"></i>
      <div class="prev-next-info">
        <p class="prev-next-subtitle">vorige</p>
        <p class="prev-next-title">Interfaces</p>
      </div>
    </a>
    <a class="right-next"
       href="opgave.html"
       title="next page">
      <div class="prev-next-info">
        <p class="prev-next-subtitle">volgende</p>
        <p class="prev-next-title">Opgave</p>
      </div>
      <i class="fa-solid fa-angle-right"></i>
    </a>
</div>
                </footer>
              
            </div>
            
            
              
                <dialog id="pst-secondary-sidebar-modal"></dialog>
                <div id="pst-secondary-sidebar" class="bd-sidebar-secondary bd-toc"><div class="sidebar-secondary-items sidebar-secondary__inner">


  <div class="sidebar-secondary-item">
  <div class="page-toc tocsection onthispage">
    <i class="fa-solid fa-list"></i> Inhoud
  </div>
  <nav class="bd-toc-nav page-toc">
    <ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#model-view-controller">Model-View-Controller</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#een-html-bestand-inlezen">Een html-bestand inlezen</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#output-buffering">Output buffering</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#de-functie-eval">De functie <code class="docutils literal notranslate"><span class="pre">Eval</span></code></a></li>
</ul>
  </nav></div>

</div></div>
              
            
          </div>
          <footer class="bd-footer-content">
            
<div class="bd-footer-content__inner container">
  
  <div class="footer-item">
    
<p class="component-author">
Door Bart Barnard & Ralf van den Broek
</p>

  </div>
  
  <div class="footer-item">
    

  </div>
  
  <div class="footer-item">
    
  </div>
  
  <div class="footer-item">
    
  </div>
  
</div>
          </footer>
        

      </main>
    </div>
  </div>
  
  <!-- Scripts loaded after <body> so the DOM is not blocked -->
  <script defer src="../_static/scripts/bootstrap.js?digest=26a4bc78f4c0ddb94549"></script>
<script defer src="../_static/scripts/pydata-sphinx-theme.js?digest=26a4bc78f4c0ddb94549"></script>

  <footer class="bd-footer">
  </footer>
  </body>
</html>